databaseChangeLog:
    - changeSet:
        id: 1.0-1
        author: howed
        comment: Create street_posting_box table
        changes:
        - createTable:
            tableName: street_posting_box
            columns:
            - column:
                name: id
                type: int
                autoIncrement: true
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: imei
                type: varchar(15)
                constraints:
                  nullable: false
            - column:
                name: timezone
                type: varchar(30)
                constraints:
                  nullable: false
            - column:
                name: api_key
                type: varchar(36)
            - column:
                name: prev_api_key
                type: varchar(36)
            - column:
                name: address
                type: varchar(40)
            - column:
                name: postcode
                type: number(4)
            - column:
                name: latitude
                type: number(9,6)
            - column:
                name: longitude
                type: number(9,6)
            - column:
                name: version
                type: int
                constraints:
                  nullable: false
        - createIndex:
              columns:
              - column:
                  name: imei
              indexName: idx_spb_01
              tableName: street_posting_box
              unique: true

    - changeSet:
        id: 1.0-2
        author: howed
        comment: Insert SPB data
        changes:
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 359769034498003
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 152 Bligh St, Warrane
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.856737
            - column:
                name: longitude
                value: 147.381942
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 623233982383836
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 14 Edgeworth St, Warrane
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.860217
            - column:
                name: longitude
                value: 147.377398
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 234924324783982
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 46 Bligh St, Rosny Park
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.863753
            - column:
                name: longitude
                value: 147.370972
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 239098243674342
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 5 Alma Rd, Bellerive
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.871513
            - column:
                name: longitude
                value: 147.371683
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 782342432432432
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 33 Beach St, Bellerive
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.87561
            - column:
                name: longitude
                value: 147.376218
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 624356236235621
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 65 Wentworth St, Bellerive
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.875822
            - column:
                name: longitude
                value: 147.38797
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 243989823982283
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 36 Hill St, Bellerive
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.873563
            - column:
                name: longitude
                value: 147.382391
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 823461542426743
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 11 Belar St, Howrah
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.875635
            - column:
                name: longitude
                value: 147.393452
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 982398234737243
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 183 Clarence St, Howrah
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.877909
            - column:
                name: longitude
                value: 147.396501
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 984367432311212
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 18 Ninabah St, Howrah
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.87499
            - column:
                name: longitude
                value: 147.398874
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 658594935204638
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: Opposite 93 Tranmere Rd, Howrah
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.896812
            - column:
                name: longitude
                value: 147.411673
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 397652098363543
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 3 Binalong Rd, Mornington
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.862493
            - column:
                name: longitude
                value: 147.380036
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 186435438230753
            - column:
                name: timezone
                value: Australia/Hobart
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 273 Cambridge Rd,  Warrane
            - column:
                name: postcode
                value: 7018
            - column:
                name: latitude
                value: -42.858529
            - column:
                name: longitude
                value: 147.388683
            - column:
                name: version
                value: 1

    - changeSet:
        id: 1.0-2-dev
        author: howed
        context: "!(infra OR pdev OR ptest OR sdev OR stest OR prod)"
        comment: Insert SPB data for local development
        changes:
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 723724378324782
            - column:
                name: timezone
                value: Australia/Perth
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 82 St Andrews Drive Yanchep
            - column:
                name: postcode
                value: 6035
            - column:
                name: latitude
                value: -31.54041
            - column:
                name: longitude
                value: 115.651
            - column:
                name: version
                value: 1
        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 256765334454354
            - column:
                name: timezone
                value: Australia/Perth
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 47 Two Rocks Road Two Rocks
            - column:
                name: postcode
                value: 6037
            - column:
                name: latitude
                value: -31.5036646
            - column:
                name: longitude
                value: 115.5927279
            - column:
                name: version
                value: 1

        - insert:
            tableName: street_posting_box
            columns:
            - column:
                name: imei
                value: 854848734774477
            - column:
                name: timezone
                value: Australia/Perth
            - column:
                name: api_key
                value: 16fa2ee7-6614-4f62-bc16-a3c6fa189675
            - column:
                name: prev_api_key
                value: a73c5740-1cde-40a9-bde7-1d5e44761f77
            - column:
                name: address
                value: 8 Enterprise Avenue Two Rocks
            - column:
                name: postcode
                value: 6037
            - column:
                name: latitude
                value: -31.4944587
            - column:
                name: longitude
                value: 115.5834687
            - column:
                name: version
                value: 1

    - changeSet:
        id: 1.0-3
        author: howed
        comment: Create reading table
        changes:
        - createTable:
            tableName: reading
            columns:
            - column:
                name: id
                type: int
                autoIncrement: true
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: street_posting_box_id
                type: int
                constraints:
                  nullable: false
                  foreignKeyName: fk_reading_spb
                  references: street_posting_box(id)
            - column:
                name: date_time
                type: datetime
                constraints:
                  nullable: false
            - column:
                name: grams
                type: int
                constraints:
                  nullable: false
            - column:
                name: total_grams
                type: int
                constraints:
                  nullable: false
            - column:
                name: article_count
                type: int
                constraints:
                  nullable: false
            - column:
                name: degrees_c
                type: number(4, 1)
            - column:
                name: latest_ind
                type: boolean
                constraints:
                  nullable: false
        - createIndex:
            columns:
            - column:
                name: street_posting_box_id
            - column:
                name: latest_ind
            indexName: idx_reading_01
            tableName: reading

    - changeSet:
        id: 1.0-3-dev
        author: howed
        context: "!(infra OR pdev OR ptest OR sdev OR stest OR prod)"
        comment: Insert reading data for local development
        changes:
        - insert:
            tableName: reading
            columns:
            - column:
                name: street_posting_box_id
                value: 1
            - column:
                name: date_time
                valueDate: "2016-11-01T07:00:00"
            - column:
                name: grams
                value: 10
            - column:
                name: total_grams
                value: 150
            - column:
                name: article_count
                value: 1
            - column:
                name: degrees_c
                value: 21.3
            - column:
                name: latest_ind
                value: false
        - insert:
            tableName: reading
            columns:
            - column:
                name: street_posting_box_id
                value: 1
            - column:
                name: date_time
                valueDate: "2016-11-01T07:01:00"
            - column:
                name: grams
                value: 11
            - column:
                name: total_grams
                value: 161
            - column:
                name: article_count
                value: 2
            - column:
                name: degrees_c
                value: 21.4
            - column:
                name: latest_ind
                value: true

    - changeSet:
        id: 1.0-4
        author: howed
        comment: Create remote_config table
        changes:
        - createTable:
            tableName: remote_config
            columns:
            - column:
                name: id
                type: int
                constraints:
                    primaryKey: true
                    nullable: false
            - column:
                name: version
                type: int
                constraints:
                    nullable: false

        - createTable:
            tableName: remote_config_prop
            columns:
            - column:
                name: remote_config_id
                type: int
                constraints:
                    primaryKey: true
                    nullable: false
            - column:
                name: name
                type: varchar(32)
                constraints:
                    primaryKey: true
                    nullable: false
            - column:
                name: value
                type: varchar(256)
                constraints:
                    nullable: true
            - column:
                name: description
                type: varchar(256)
                constraints:
                    nullable: true

        - insert:
            tableName: remote_config
            columns:
            - column:
                name: id
                value: 1
            - column:
                name: version
                value: 1
        - insert:
            tableName: remote_config_prop
            columns:
            - column:
                name: remote_config_id
                value: 1
            - column:
                name: name
                value: url
            - column:
                name: description
                value: The base URL for the remote REST web services.
        - insert:
            tableName: remote_config_prop
            columns:
            - column:
                name: remote_config_id
                value: 1
            - column:
                name: name
                value: readingSeconds
            - column:
                name: description
                value: The number of seconds between readings of the SPB weight.
        - insert:
            tableName: remote_config_prop
            columns:
            - column:
                name: remote_config_id
                value: 1
            - column:
                name: name
                value: sleepSeconds
            - column:
                name: description
                value: The number of seconds the microcontroller should sleep for.

    - changeSet:
        id: 1.0-4-dev
        author: howed
        comment: Insert remote_config data for local development
        context: "!(infra OR pdev OR ptest OR sdev OR stest OR prod)"
        changes:
        - update:
            tableName: remote_config_prop
            columns:
            - column:
                name: value
                value: http://localhost:8080/rest/remote
            where: remote_config_id = 1 AND name='url'
        - update:
            tableName: remote_config_prop
            columns:
            - column:
                name: value
                value: 8
            where: remote_config_id = 1 AND name='readingSeconds'
        - update:
            tableName: remote_config_prop
            columns:
            - column:
                name: value
                value: 8
            where: remote_config_id = 1 AND name='sleepSeconds'
